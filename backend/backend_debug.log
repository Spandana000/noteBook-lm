2026-02-11 10:11:01,701 - INFO - Uploading file: dummy.txt
2026-02-11 10:11:02,099 - ERROR - Error uploading file: 404 NOT_FOUND. {'error': {'code': 404, 'message': 'models/text-embedding-004 is not found for API version v1beta, or is not supported for embedContent. Call ListModels to see the list of available models and their supported methods.', 'status': 'NOT_FOUND'}}
2026-02-11 10:11:02,115 - ERROR - Traceback (most recent call last):
  File "C:\Users\N.SPANDANA\OneDrive\Desktop\Lumina\backend\main.py", line 44, in upload_document
    await rag_service.process_file(file)
  File "C:\Users\N.SPANDANA\OneDrive\Desktop\Lumina\backend\services\rag_service.py", line 100, in process_file
    raise e
  File "C:\Users\N.SPANDANA\OneDrive\Desktop\Lumina\backend\services\rag_service.py", line 90, in process_file
    res = self.google_client.models.embed_content(model="text-embedding-004", contents=chunk)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\genai\models.py", line 4191, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\genai\_api_client.py", line 1386, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\genai\_api_client.py", line 1222, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\tenacity\__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\tenacity\__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\tenacity\__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\tenacity\__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\tenacity\__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\genai\_api_client.py", line 1199, in _request_once
    errors.APIError.raise_for_response(response)
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\genai\errors.py", line 121, in raise_for_response
    cls.raise_error(response.status_code, response_json, response)
  File "C:\Users\N.SPANDANA\AppData\Local\Programs\Python\Python311\Lib\site-packages\google\genai\errors.py", line 146, in raise_error
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 404 NOT_FOUND. {'error': {'code': 404, 'message': 'models/text-embedding-004 is not found for API version v1beta, or is not supported for embedContent. Call ListModels to see the list of available models and their supported methods.', 'status': 'NOT_FOUND'}}

2026-02-11 10:14:01,273 - INFO - Uploading file: 9-cloud-computing.pdf
2026-02-11 10:16:08,919 - INFO - Uploading file: images.jpg
2026-02-11 10:42:26,693 - INFO - Uploading file: images.jpg
2026-02-11 10:50:56,628 - INFO - Uploading file: doc1.txt
2026-02-11 10:50:59,400 - INFO - Uploading file: doc2.txt
2026-02-11 10:51:59,415 - INFO - Uploading file: doc1.txt
2026-02-11 10:52:02,012 - INFO - Uploading file: doc2.txt
2026-02-11 10:54:06,034 - INFO - Uploading file: doc1.txt for session: 4d7cbd3b-1070-4777-8be5-a82294fad4f2
2026-02-11 10:54:08,846 - INFO - Uploading file: doc2.txt for session: b81dd850-cf96-4b04-ae4e-93a62f515a84
2026-02-11 10:54:13,363 - INFO - DEBUG: Querying with session_id='4d7cbd3b-1070-4777-8be5-a82294fad4f2', where_filter={'session_id': '4d7cbd3b-1070-4777-8be5-a82294fad4f2'}
2026-02-11 10:54:15,421 - INFO - DEBUG: Querying with session_id='b81dd850-cf96-4b04-ae4e-93a62f515a84', where_filter={'session_id': 'b81dd850-cf96-4b04-ae4e-93a62f515a84'}
2026-02-11 10:55:42,858 - INFO - Uploading file: doc1.txt for session: de23d46f-c778-4040-9319-95aaab3c2964
2026-02-11 10:55:45,799 - INFO - Uploading file: doc2.txt for session: f40ecab9-b0e0-4b2b-9ac2-6707b57ecb8b
2026-02-11 10:55:51,194 - INFO - DEBUG: Querying with session_id='de23d46f-c778-4040-9319-95aaab3c2964', where_filter={'session_id': 'de23d46f-c778-4040-9319-95aaab3c2964'}
2026-02-11 10:55:51,230 - INFO - DEBUG: Retrieved docs metadata: [[{'filename': 'doc1.txt', 'session_id': 'de23d46f-c778-4040-9319-95aaab3c2964', 'type': 'text/plain'}]]
2026-02-11 10:55:54,192 - INFO - DEBUG: Querying with session_id='f40ecab9-b0e0-4b2b-9ac2-6707b57ecb8b', where_filter={'session_id': 'f40ecab9-b0e0-4b2b-9ac2-6707b57ecb8b'}
2026-02-11 10:55:54,195 - INFO - DEBUG: Retrieved docs metadata: [[{'session_id': 'f40ecab9-b0e0-4b2b-9ac2-6707b57ecb8b', 'filename': 'doc2.txt', 'type': 'text/plain'}]]
2026-02-11 10:57:18,225 - INFO - Uploading file: WhatsApp Image 2026-02-11 at 10.52.42 AM.jpeg for session: null
2026-02-11 10:57:31,194 - INFO - DEBUG: Querying with session_id='77779e44-6b30-439e-b905-cc27e9b79176', where_filter={'session_id': '77779e44-6b30-439e-b905-cc27e9b79176'}
2026-02-11 10:57:31,244 - INFO - DEBUG: Retrieved docs metadata: [[]]
2026-02-11 10:57:46,026 - INFO - Uploading file: WhatsApp Image 2026-02-11 at 10.52.42 AM.jpeg for session: 77779e44-6b30-439e-b905-cc27e9b79176
2026-02-11 10:58:00,888 - INFO - DEBUG: Querying with session_id='77779e44-6b30-439e-b905-cc27e9b79176', where_filter={'session_id': '77779e44-6b30-439e-b905-cc27e9b79176'}
2026-02-11 10:58:00,893 - INFO - DEBUG: Retrieved docs metadata: [[{'type': 'image/jpeg', 'session_id': '77779e44-6b30-439e-b905-cc27e9b79176', 'filename': 'WhatsApp Image 2026-02-11 at 10.52.42 AM.jpeg'}]]
2026-02-11 10:59:37,245 - INFO - Uploading file: Screenshot 2026-02-11 105904.png for session: 77779e44-6b30-439e-b905-cc27e9b79176
2026-02-11 10:59:46,846 - INFO - DEBUG: Querying with session_id='77779e44-6b30-439e-b905-cc27e9b79176', where_filter={'session_id': '77779e44-6b30-439e-b905-cc27e9b79176'}
2026-02-11 10:59:46,851 - INFO - DEBUG: Retrieved docs metadata: [[{'filename': 'WhatsApp Image 2026-02-11 at 10.52.42 AM.jpeg', 'type': 'image/jpeg', 'session_id': '77779e44-6b30-439e-b905-cc27e9b79176'}, {'type': 'image/png', 'session_id': '77779e44-6b30-439e-b905-cc27e9b79176', 'filename': 'Screenshot 2026-02-11 105904.png'}]]
2026-02-11 11:05:07,593 - INFO - DEBUG: Querying with session_id='6adedd3c-4b28-494e-898b-72e903d9ac59', where_filter={'session_id': '6adedd3c-4b28-494e-898b-72e903d9ac59'}
2026-02-11 11:05:07,595 - INFO - DEBUG: Retrieved docs metadata: [[]]
